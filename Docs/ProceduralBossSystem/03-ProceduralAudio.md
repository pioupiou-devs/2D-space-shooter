# ?? Procedural Audio System

## Overview

All audio is synthesized in **real-time** using `OnAudioFilterRead` and DSP algorithms. No audio files are needed - everything is generated from mathematical waveforms and parameters.

---

## ?? Core Principle: Real-Time Synthesis

```
???????????????????????????????????????????????????????????????????????????????
?                    PROCEDURAL AUDIO PHILOSOPHY                              ?
???????????????????????????????????????????????????????????????????????????????
?                                                                             ?
?  TRADITIONAL APPROACH               PROCEDURAL APPROACH                     ?
?  ?????????????????????              ?????????????????????                   ?
?                                                                             ?
?  ???????????????????                ???????????????????                     ?
?  ?  Audio Files    ?                ?  DSP Parameters ?                     ?
?  ?   (WAV/OGG)     ?                ?   (floats only) ?                     ?
?  ???????????????????                ???????????????????                     ?
?           ?                                  ?                              ?
?           ?                                  ?                              ?
?  ???????????????????                ???????????????????                     ?
?  ?  AudioClip      ?                ?  Synthesizer    ?                     ?
?  ?  (memory)       ?                ?  (math/DSP)     ?                     ?
?  ???????????????????                ???????????????????                     ?
?           ?                                  ?                              ?
?           ?                                  ?                              ?
?  ???????????????????                ???????????????????                     ?
?  ?  Playback       ?                ?  Real-time Gen  ?                     ?
?  ?  (fixed sound)  ?                ?  (infinite var) ?                     ?
?  ???????????????????                ???????????????????                     ?
?                                                                             ?
?  BENEFITS OF PROCEDURAL:                                                    ?
?  ?? Zero audio file storage                                                 ?
?  ?? Infinite sound variety                                                  ?
?  ?? Theme-synchronized (same seed = same music)                             ?
?  ?? Real-time parameter changes                                             ?
?  ?? Tiny build size                                                         ?
?                                                                             ?
???????????????????????????????????????????????????????????????????????????????
```

---

## ?? Audio System Architecture

```
???????????????????????????????????????????????????????????????????????????????
?                    AUDIO SYSTEM COMPONENTS                                  ?
???????????????????????????????????????????????????????????????????????????????
?                                                                             ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                  ProceduralAudioManager                         ?        ?
?  ?                  (MonoBehaviour + AudioSource)                  ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                    ?                                        ?
?              ?????????????????????????????????????????????                  ?
?              ?                     ?                     ?                  ?
?              ?                     ?                     ?                  ?
?  ????????????????????? ????????????????????? ?????????????????????          ?
?  ?  MusicSynthesizer ? ?  SFXSynthesizer   ? ?  Sequencer        ?          ?
?  ?                   ? ?                   ? ?                   ?          ?
?  ?  ?? BassTrack     ? ?  ?? Explosion     ? ?  ?? BPM           ?          ?
?  ?  ?? DrumTrack     ? ?  ?? Laser         ? ?  ?? CurrentStep   ?          ?
?  ?  ?? LeadTrack     ? ?  ?? Impact        ? ?  ?? StepTimer     ?          ?
?  ?  ?? PadTrack      ? ?  ?? Powerup       ? ?  ?? TriggerNotes  ?          ?
?  ?                   ? ?  ?? Warning       ? ?                   ?          ?
?  ????????????????????? ????????????????????? ?????????????????????          ?
?              ?                     ?                     ?                  ?
?              ?????????????????????????????????????????????                  ?
?                                    ?                                        ?
?                                    ?                                        ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                   OnAudioFilterRead(float[] data)               ?        ?
?  ?                   (Called by Unity audio thread)                ?        ?
?  ?                                                                 ?        ?
?  ?  for each sample:                                               ?        ?
?  ?      sample = music.Generate() + sfx.Generate()                 ?        ?
?  ?      sample = ApplyMasterEffects(sample)                        ?        ?
?  ?      data[i] = Clamp(sample, -1, 1)                             ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
???????????????????????????????????????????????????????????????????????????????
```

---

## ?? Basic Waveforms

```
???????????????????????????????????????????????????????????????????????????????
?                       OSCILLATOR WAVEFORMS                                  ?
???????????????????????????????????????????????????????????????????????????????
?                                                                             ?
?  SINE WAVE (pure tone, smooth)                                              ?
?  ?????????????????????????????                                              ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?            ????                              ????               ?        ?
?  ?          ??    ??                          ??    ??             ?        ?
?  ?        ??        ??                      ??        ??           ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                      ??              ??                ??       ?        ?
?  ?                        ??          ??                    ??     ?        ?
?  ?                          ??????????                        ???? ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?  output = sin(2? × frequency × time)                                        ?
?                                                                             ?
?  SQUARE WAVE (harsh, retro)                                                 ?
?  ??????????????????????????                                                 ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?  ????????????????                      ????????????????         ?        ?
?  ?  ?              ?                      ?              ?         ?        ?
?  ?  ?              ?                      ?              ?         ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                 ?              ?                      ?         ?        ?
?  ?                 ?              ?                      ?         ?        ?
?  ?                 ????????????????                      ????????  ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?  output = sign(sin(2? × frequency × time))                                  ?
?                                                                             ?
?  SAWTOOTH WAVE (buzzy, rich harmonics)                                      ?
?  ?????????????????????????????????????                                      ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?        ??                      ??                      ??       ?        ?
?  ?      ????                    ????                    ????       ?        ?
?  ?    ??????                  ??????                  ??????       ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ???????????              ??????????              ??????????       ?        ?
?  ?  ????????            ????????                ????????           ?        ?
?  ?    ??????          ??????                  ??????               ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?  output = 2 × (frequency × time % 1) - 1                                    ?
?                                                                             ?
?  TRIANGLE WAVE (mellow, flute-like)                                         ?
?  ??????????????????????????????????                                         ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?          ??                              ??                     ?        ?
?  ?        ??  ??                          ??  ??                   ?        ?
?  ?      ??      ??                      ??      ??                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?  ??              ??              ??              ??             ?        ?
?  ???                  ??          ??                  ??           ?        ?
?  ?                      ??      ??                      ??         ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?  output = 2 × abs(2 × (frequency × time % 1) - 1) - 1                       ?
?                                                                             ?
?  NOISE (white noise, percussion, effects)                                   ?
?  ????????????????????????????????????????                                   ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?? ??  ? ??? ?  ?? ? ? ???  ? ?? ?  ??? ? ??  ? ? ?? ?  ?? ? ???  ?        ?
?  ???  ?? ?   ?? ?  ?? ??   ?? ?  ?? ?   ?? ? ?? ??   ?? ?  ?? ?    ?        ?
?  ?  ?  ?  ? ?  ? ??  ?  ? ?  ? ?  ? ? ?  ?  ?  ?  ? ?  ? ?  ?  ? ? ?        ?
?  ????????????????????????????????????????????????????????????????  ?        ?
?  ? ? ?  ?  ?  ??  ? ?  ? ?  ?  ? ?  ?  ?  ?  ? ?  ?  ?  ??  ? ?    ?        ?
?  ??  ??  ?? ??  ??  ??  ? ?? ??  ??  ?? ??  ??  ?? ??  ?  ??  ??   ?        ?
?  ?  ?  ?  ?   ?  ? ?  ??  ?   ?  ? ?  ?   ?  ? ?  ??  ? ?  ? ?  ?  ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?  output = random(-1, 1)                                                     ?
?                                                                             ?
???????????????????????????????????????????????????????????????????????????????
```

---

## ?? ADSR Envelope

```
???????????????????????????????????????????????????????????????????????????????
?                       ADSR ENVELOPE SHAPING                                 ?
???????????????????????????????????????????????????????????????????????????????
?                                                                             ?
?  ADSR = Attack, Decay, Sustain, Release                                     ?
?  Shapes the volume of a sound over time                                     ?
?                                                                             ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                                                                 ?        ?
?  ?  Volume                                                         ?        ?
?  ?    ?                                                            ?        ?
?  ?  1.0?        ??                                                 ?        ?
?  ?    ?       ?  ?                                                 ?        ?
?  ?    ?      ?    ?                                                ?        ?
?  ?    ?     ?      ??????????????????????????                      ?        ?
?  ?    ?    ?                                  ??                   ?        ?
?  ?    ?   ?           SUSTAIN                   ??                 ?        ?
?  ?    ?  ?            LEVEL                       ??               ?        ?
?  ?  0.0?????????????????????????????????????????????????????????????        ?
?  ?    ???????????????????????????????????????????????????????      ?        ?
?  ?      ?  A   ?    D    ?          S           ?    R    ?  Time  ?        ?
?  ?      ?      ?         ?                      ?         ?        ?        ?
?  ?    NOTE    PEAK     SUSTAIN               NOTE OFF   SILENT     ?        ?
?  ?    ON      VOLUME   HOLD                                        ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
?  PARAMETER VALUES (in seconds):                                             ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                                                                 ?        ?
?  ?  Sound Type      Attack    Decay    Sustain   Release           ?        ?
?  ?  ????????????????????????????????????????????????????????????   ?        ?
?  ?  Bass            0.01      0.1      0.7       0.2               ?        ?
?  ?  Lead            0.05      0.2      0.6       0.3               ?        ?
?  ?  Pad             0.5       0.3      0.8       1.0               ?        ?
?  ?  Drums           0.001     0.1      0.0       0.1               ?        ?
?  ?  Laser SFX       0.001     0.05     0.3       0.1               ?        ?
?  ?  Explosion SFX   0.001     0.5      0.0       0.5               ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
?  ENVELOPE STATE MACHINE:                                                    ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                                                                 ?        ?
?  ?  ???????????  NoteOn   ???????????  time>A   ???????????        ?        ?
?  ?  ?  IDLE   ????????????? ATTACK  ?????????????  DECAY  ?        ?        ?
?  ?  ???????????           ???????????           ???????????        ?        ?
?  ?       ?                                           ?             ?        ?
?  ?       ?                                     time>D?             ?        ?
?  ?       ?                                           ?             ?        ?
?  ?  ???????????  time>R   ???????????  NoteOff ???????????         ?        ?
?  ?  ? SILENT  ????????????? RELEASE ???????????? SUSTAIN ?         ?        ?
?  ?  ???????????           ???????????          ???????????         ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
???????????????????????????????????????????????????????????????????????????????
```

---

## ?? Music Track Structure

```
???????????????????????????????????????????????????????????????????????????????
?                       PROCEDURAL MUSIC STRUCTURE                            ?
???????????????????????????????????????????????????????????????????????????????
?                                                                             ?
?  4 TRACKS PLAYING SIMULTANEOUSLY                                            ?
?                                                                             ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                                                                 ?        ?
?  ?  BAR:      1           2           3           4                ?        ?
?  ?  STEP:  1234567890123456123456789012345612345678901234561234567 ?        ?
?  ?                                                                 ?        ?
?  ?  ???????????????????????????????????????????????????????????    ?        ?
?  ?                                                                 ?        ?
?  ?  BASS:  ?   ?   ?   ?   ?   ?   ?   ?   ?   ?   ?   ?   ?   ?   ?        ?
?  ?         C2      C2      G2      G2      C2      C2      G2  G2  ?        ?
?  ?         (root)  (root)  (5th)   (5th)   (root)  (root)  (5th)   ?        ?
?  ?                                                                 ?        ?
?  ?  DRUMS: X . x . X . x . X . x . X . x . X . x . X . x . X . x . ?        ?
?  ?         K   H   S   H   K   H   S   H   K   H   S   H   K   H   ?        ?
?  ?         (K=kick, S=snare, H=hihat)                              ?        ?
?  ?                                                                 ?        ?
?  ?  LEAD:  .   ?   .   ? ? .   .   ?   .   ?   .   ? ? .   .   ?   ?        ?
?  ?             C4      E4G4        A4      C5      E5G5        C5  ?        ?
?  ?             (melody notes from scale)                           ?        ?
?  ?                                                                 ?        ?
?  ?  PAD:   ?????????????????????????????????????????????????????????        ?
?  ?         Cm              Fm              Gm              Eb      ?        ?
?  ?         (chord held for entire bar)                             ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
?  TIMING:                                                                    ?
?  ?? BPM: 120 (from theme, scales with difficulty)                           ?
?  ?? Steps per beat: 4 (16th notes)                                          ?
?  ?? Steps per bar: 16                                                       ?
?  ?? Total bars: 16 (256 steps, then loop)                                   ?
?  ?? Step duration: 60 / BPM / 4 = 0.125 seconds                             ?
?                                                                             ?
???????????????????????????????????????????????????????????????????????????????
```

---

## ?? Scale and Chord Generation

```
???????????????????????????????????????????????????????????????????????????????
?                    MUSICAL SCALE SELECTION                                  ?
???????????????????????????????????????????????????????????????????????????????
?                                                                             ?
?  SCALE TYPES (based on seed/theme mood)                                     ?
?                                                                             ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                                                                 ?        ?
?  ?  MINOR (Tense, dramatic)                                        ?        ?
?  ?  ?????????????????????????????????????                          ?        ?
?  ?  ?C ?  ?D ?Eb?  ?F ?  ?G ?Ab?  ?Bb?  ?                          ?        ?
?  ?  ?????????????????????????????????????                          ?        ?
?  ?  ?????????????????????????????????????                          ?        ?
?  ?  Intervals: 0, 2, 3, 5, 7, 8, 10                                ?        ?
?  ?                                                                 ?        ?
?  ?  PHRYGIAN (Dark, aggressive)                                    ?        ?
?  ?  ?????????????????????????????????????                          ?        ?
?  ?  ?C ?Db?  ?Eb?  ?F ?  ?G ?Ab?  ?Bb?  ?                          ?        ?
?  ?  ?????????????????????????????????????                          ?        ?
?  ?  ?????????????????????????????????????                          ?        ?
?  ?  Intervals: 0, 1, 3, 5, 7, 8, 10                                ?        ?
?  ?                                                                 ?        ?
?  ?  DORIAN (Mysterious, space-like)                                ?        ?
?  ?  ?????????????????????????????????????                          ?        ?
?  ?  ?C ?  ?D ?Eb?  ?F ?  ?G ?  ?A ?Bb?  ?                          ?        ?
?  ?  ?????????????????????????????????????                          ?        ?
?  ?  ?????????????????????????????????????                          ?        ?
?  ?  Intervals: 0, 2, 3, 5, 7, 9, 10                                ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
?  CHORD PROGRESSIONS (from scale)                                            ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                                                                 ?        ?
?  ?  Common progressions (4 bars each):                             ?        ?
?  ?                                                                 ?        ?
?  ?  Progression 1: i   - iv  - v   - III                           ?        ?
?  ?                 Cm  - Fm  - Gm  - Eb                            ?        ?
?  ?                                                                 ?        ?
?  ?  Progression 2: i   - VI  - III - VII                           ?        ?
?  ?                 Cm  - Ab  - Eb  - Bb                            ?        ?
?  ?                                                                 ?        ?
?  ?  Progression 3: i   - v   - VI  - iv                            ?        ?
?  ?                 Cm  - Gm  - Ab  - Fm                            ?        ?
?  ?                                                                 ?        ?
?  ?  Selection based on seed % 3                                    ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
???????????????????????????????????????????????????????????????????????????????
```

---

## ?? Drum Synthesis

```
???????????????????????????????????????????????????????????????????????????????
?                       DRUM SOUND SYNTHESIS                                  ?
???????????????????????????????????????????????????????????????????????????????
?                                                                             ?
?  KICK DRUM                                                                  ?
?  ?????????                                                                  ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                                                                 ?        ?
?  ?  Frequency ?                                                    ?        ?
?  ?     150 Hz ???                                                  ?        ?
?  ?            ?  ??                                                ?        ?
?  ?            ?    ????                                            ?        ?
?  ?      50 Hz ?        ??????????????????????                      ?        ?
?  ?            ?????????????????????????????????????????????? Time  ?        ?
?  ?                 0ms       50ms      100ms     150ms             ?        ?
?  ?                                                                 ?        ?
?  ?  Components:                                                    ?        ?
?  ?  ?? Sine wave with pitch envelope (150Hz ? 50Hz)                ?        ?
?  ?  ?? Short noise burst at start (click)                          ?        ?
?  ?  ?? Quick amplitude decay                                       ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
?  SNARE DRUM                                                                 ?
?  ??????????                                                                 ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                                                                 ?        ?
?  ?  Amplitude ?                                                    ?        ?
?  ?       1.0  ??? ? Noise burst (main body)                        ?        ?
?  ?            ?????                                                ?        ?
?  ?            ?  ??????                                            ?        ?
?  ?       0.0  ?        ??????????????????                          ?        ?
?  ?            ?????????????????????????????????????????????? Time  ?        ?
?  ?                 0ms       50ms      100ms     200ms             ?        ?
?  ?                                                                 ?        ?
?  ?  Components:                                                    ?        ?
?  ?  ?? Filtered white noise (bandpass 200-8000Hz)                  ?        ?
?  ?  ?? Sine "body" at 200Hz (short)                                ?        ?
?  ?  ?? Medium decay envelope                                       ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
?  HI-HAT                                                                     ?
?  ???????                                                                    ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                                                                 ?        ?
?  ?  CLOSED HI-HAT              OPEN HI-HAT                         ?        ?
?  ?  Amplitude ?                Amplitude ?                         ?        ?
?  ?       1.0  ???                   1.0  ???                       ?        ?
?  ?            ? ??                       ?  ????                   ?        ?
?  ?            ?  ?                       ?      ????????           ?        ?
?  ?       0.0  ?   ?                 0.0  ?              ????????   ?        ?
?  ?            ??????? 30ms               ?????????????????? 300ms  ?        ?
?  ?                                                                 ?        ?
?  ?  Components:                                                    ?        ?
?  ?  ?? High-pass filtered noise (>6000Hz)                          ?        ?
?  ?  ?? Very short decay (closed) or longer (open)                  ?        ?
?  ?  ?? Slight resonance for metallic quality                       ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
?  DRUM PATTERN ENCODING (bitfield per step):                                 ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                                                                 ?        ?
?  ?  Bit 0 (1): Kick                                                ?        ?
?  ?  Bit 1 (2): Snare                                               ?        ?
?  ?  Bit 2 (4): Hi-hat (closed)                                     ?        ?
?  ?  Bit 3 (8): Hi-hat (open)                                       ?        ?
?  ?                                                                 ?        ?
?  ?  Example: 5 = 0101 = Kick + Closed Hi-hat                       ?        ?
?  ?  Example: 6 = 0110 = Snare + Closed Hi-hat                      ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
???????????????????????????????????????????????????????????????????????????????
```

---

## ?? SFX Synthesis

```
???????????????????????????????????????????????????????????????????????????????
?                       SOUND EFFECT SYNTHESIS                                ?
???????????????????????????????????????????????????????????????????????????????
?                                                                             ?
?  LASER SHOT                                                                 ?
?  ??????????                                                                 ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                                                                 ?        ?
?  ?  Frequency ?                                                    ?        ?
?  ?    2000 Hz ???                                                  ?        ?
?  ?            ?  ????                                              ?        ?
?  ?            ?      ????????                                      ?        ?
?  ?     500 Hz ?              ????????????????                      ?        ?
?  ?            ?????????????????????????????????????????????? Time  ?        ?
?  ?                 0ms       30ms       60ms      100ms            ?        ?
?  ?                                                                 ?        ?
?  ?  Synthesis:                                                     ?        ?
?  ?  ?? Square wave with pitch envelope (high ? low)                ?        ?
?  ?  ?? Short attack, medium decay                                  ?        ?
?  ?  ?? Optional slight noise layer                                 ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
?  EXPLOSION                                                                  ?
?  ?????????                                                                  ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                                                                 ?        ?
?  ?  Amplitude ?                                                    ?        ?
?  ?       1.0  ?????                                                ?        ?
?  ?            ?    ????????                                        ?        ?
?  ?            ?            ????????????                            ?        ?
?  ?       0.0  ?                        ????????????????????        ?        ?
?  ?            ?????????????????????????????????????????????? Time  ?        ?
?  ?                 0ms      200ms     400ms     600ms    1000ms    ?        ?
?  ?                                                                 ?        ?
?  ?  Synthesis:                                                     ?        ?
?  ?  ?? Low-pass filtered noise (cutoff decays over time)           ?        ?
?  ?  ?? Sub-bass sine wave (50Hz) for impact                        ?        ?
?  ?  ?? Long decay envelope                                         ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
?  POWERUP COLLECT                                                            ?
?  ???????????????                                                            ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                                                                 ?        ?
?  ?  Frequency ?                                                    ?        ?
?  ?    1500 Hz ?                              ????????              ?        ?
?  ?            ?                    ??????????                      ?        ?
?  ?            ?          ??????????                                ?        ?
?  ?     500 Hz ???????????                                          ?        ?
?  ?            ?????????????????????????????????????????????? Time  ?        ?
?  ?                 0ms       50ms      100ms     150ms             ?        ?
?  ?                                                                 ?        ?
?  ?  Synthesis:                                                     ?        ?
?  ?  ?? Sine/triangle wave with rising pitch                        ?        ?
?  ?  ?? Slight vibrato for sparkle                                  ?        ?
?  ?  ?? Quick attack, medium sustain, short release                 ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
?  DAMAGE/HIT                                                                 ?
?  ??????????                                                                 ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                                                                 ?        ?
?  ?  Short noise burst + low thump                                  ?        ?
?  ?                                                                 ?        ?
?  ?  Synthesis:                                                     ?        ?
?  ?  ?? Band-pass noise (500-2000Hz)                                ?        ?
?  ?  ?? Sine wave at 100Hz for "weight"                             ?        ?
?  ?  ?? Very short duration (50ms)                                  ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
?  BOSS WARNING                                                               ?
?  ????????????                                                               ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                                                                 ?        ?
?  ?  Low drone with rising tension                                  ?        ?
?  ?                                                                 ?        ?
?  ?  Synthesis:                                                     ?        ?
?  ?  ?? Sawtooth at 80Hz (rumble)                                   ?        ?
?  ?  ?? Second sawtooth slightly detuned (beating)                  ?        ?
?  ?  ?? Slow LFO on volume (pulsing)                                ?        ?
?  ?  ?? Duration: 2-3 seconds                                       ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
???????????????????????????????????????????????????????????????????????????????
```

---

## ?? Audio Mixing

```
???????????????????????????????????????????????????????????????????????????????
?                       AUDIO MIXING PIPELINE                                 ?
???????????????????????????????????????????????????????????????????????????????
?                                                                             ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                                                                 ?        ?
?  ?  TRACK VOLUMES (relative levels)                                ?        ?
?  ?                                                                 ?        ?
?  ?  Bass:   ????????????????????  1.0  (foundation)                ?        ?
?  ?  Drums:  ??????????????????    0.9  (rhythm)                    ?        ?
?  ?  Lead:   ????????????          0.6  (melody - not too loud)     ?        ?
?  ?  Pad:    ????????              0.4  (ambient - background)      ?        ?
?  ?  ?????????????????????????????????????????????????????????????  ?        ?
?  ?  SFX:    ????????????????????  1.0  (always audible)            ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
?  MIXING CHAIN:                                                              ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                                                                 ?        ?
?  ?  ????????????  ????????????  ????????????  ????????????         ?        ?
?  ?  ?   Bass   ?  ?  Drums   ?  ?   Lead   ?  ?   Pad    ?         ?        ?
?  ?  ????????????  ????????????  ????????????  ????????????         ?        ?
?  ?       ?             ?             ?             ?               ?        ?
?  ?       ???????????????????????????????????????????               ?        ?
?  ?                            ?                                    ?        ?
?  ?                            ?                                    ?        ?
?  ?                   ??????????????????                            ?        ?
?  ?                   ?  Music Submix  ?                            ?        ?
?  ?                   ?  (vol: 0.7)    ?                            ?        ?
?  ?                   ??????????????????                            ?        ?
?  ?                           ?                                     ?        ?
?  ?  ????????????             ?                                     ?        ?
?  ?  ?   SFX    ?             ?                                     ?        ?
?  ?  ? Submix   ?             ?                                     ?        ?
?  ?  ????????????             ?                                     ?        ?
?  ?       ?                   ?                                     ?        ?
?  ?       ?????????????????????                                     ?        ?
?  ?                 ?                                               ?        ?
?  ?                 ?                                               ?        ?
?  ?        ??????????????????                                       ?        ?
?  ?        ?  Master Output ?                                       ?        ?
?  ?        ?  ?? Limiter    ?                                       ?        ?
?  ?        ?  ?? Soft Clip  ?                                       ?        ?
?  ?        ??????????????????                                       ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
?  DYNAMIC DUCKING:                                                           ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                                                                 ?        ?
?  ?  When SFX plays ? Music volume temporarily reduced              ?        ?
?  ?                                                                 ?        ?
?  ?  Music vol ?                                                    ?        ?
?  ?       1.0  ?????????          ????????????????????              ?        ?
?  ?            ?        ??      ??                                  ?        ?
?  ?       0.5  ?          ??????   ? SFX playing                    ?        ?
?  ?            ?????????????????????????????????????????????? Time  ?        ?
?  ?                                                                 ?        ?
?  ?  Duck amount: 30%                                               ?        ?
?  ?  Recovery time: 100ms                                           ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
???????????????????????????????????????????????????????????????????????????????
```

---

## ? Performance Considerations

```
???????????????????????????????????????????????????????????????????????????????
?                    AUDIO PERFORMANCE BUDGET                                 ?
???????????????????????????????????????????????????????????????????????????????
?                                                                             ?
?  AUDIO THREAD TIMING (at 48000Hz sample rate)                               ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                                                                 ?        ?
?  ?  Buffer size: 1024 samples                                      ?        ?
?  ?  Buffer duration: 1024 / 48000 = 21.3ms                         ?        ?
?  ?  Available processing time: ~10ms (50% headroom)                ?        ?
?  ?                                                                 ?        ?
?  ?  Per-buffer operations:                                         ?        ?
?  ?  ?? Music synthesis (4 tracks): ~2ms                            ?        ?
?  ?  ?? SFX synthesis (up to 16): ~3ms                              ?        ?
?  ?  ?? Mixing + effects: ~1ms                                      ?        ?
?  ?  ?? Total: ~6ms (within budget)                                 ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
?  POLYPHONY LIMITS                                                           ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                                                                 ?        ?
?  ?  Sound Type              Max Simultaneous                       ?        ?
?  ?  ????????????????????????????????????????????                   ?        ?
?  ?  Music tracks            4 (always)                             ?        ?
?  ?  Laser SFX               8 (oldest killed)                      ?        ?
?  ?  Explosion SFX           4 (oldest killed)                      ?        ?
?  ?  Impact SFX              8 (oldest killed)                      ?        ?
?  ?  UI SFX                  2                                      ?        ?
?  ?  ?????????????????????????????                                  ?        ?
?  ?  TOTAL MAX:              26 voices                              ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
?  OPTIMIZATIONS                                                              ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                                                                 ?        ?
?  ?  ? Pre-calculate sine lookup table (1024 samples)               ?        ?
?  ?  ? Use integer phase accumulators (avoid floating point)        ?        ?
?  ?  ? SIMD for mixing multiple voices                              ?        ?
?  ?  ? Skip silent voices (amplitude < 0.001)                       ?        ?
?  ?  ? Reuse voice objects (pooling)                                ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
???????????????????????????????????????????????????????????????????????????????
```

---

## ?? Game State Integration

```
???????????????????????????????????????????????????????????????????????????????
?                    AUDIO-GAME STATE SYNC                                    ?
???????????????????????????????????????????????????????????????????????????????
?                                                                             ?
?  INTENSITY MAPPING                                                          ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                                                                 ?        ?
?  ?  Game State              Audio Response                         ?        ?
?  ?  ????????????????????????????????????????????????????????????   ?        ?
?  ?  Wave start              Add lead track, increase tempo 5%      ?        ?
?  ?  Low enemy count         Reduce drums, slower tempo             ?        ?
?  ?  Boss warning            Add bass drone, tension chord          ?        ?
?  ?  Boss fight              Full intensity, faster tempo           ?        ?
?  ?  Boss phase change       Brief silence, then buildup            ?        ?
?  ?  Player low HP           Heartbeat bass pulse                   ?        ?
?  ?  Victory                 Major chord resolution                 ?        ?
?  ?  Game over               Music fade, dissonant ending           ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
?  TEMPO SCALING (difficulty-based)                                           ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                                                                 ?        ?
?  ?  Difficulty 1:   100 BPM  ????????????                          ?        ?
?  ?  Difficulty 3:   110 BPM  ?????????????                         ?        ?
?  ?  Difficulty 5:   120 BPM  ??????????????                        ?        ?
?  ?  Difficulty 7:   130 BPM  ???????????????                       ?        ?
?  ?  Difficulty 10:  140 BPM  ????????????????                      ?        ?
?  ?                                                                 ?        ?
?  ?  Formula: BPM = 100 + (difficulty × 4)                          ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
???????????????????????????????????????????????????????????????????????????????
```

---

*Previous: [02-ProceduralVisuals.md](02-ProceduralVisuals.md)*
*Next: [04-ContentGeneration.md](04-ContentGeneration.md) - Procedural enemies and bosses*
