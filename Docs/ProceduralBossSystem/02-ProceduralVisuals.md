# ?? Procedural Visual System

## Overview

All visuals are generated on the **GPU** using shaders. No sprite assets are needed - everything is rendered procedurally using **Signed Distance Fields (SDF)**, **Compute Shaders**, and **VFX Graph**.

---

## ?? Core Principle: GPU-Driven Rendering

```
???????????????????????????????????????????????????????????????????????????????
?                    GPU-DRIVEN VISUAL GENERATION                             ?
???????????????????????????????????????????????????????????????????????????????
?                                                                             ?
?  TRADITIONAL APPROACH               PROCEDURAL APPROACH                     ?
?  ?????????????????????              ?????????????????????                   ?
?                                                                             ?
?  ???????????????????                ???????????????????                     ?
?  ?  Sprite Assets  ?                ?  SDF Parameters ?                     ?
?  ?   (PNG files)   ?                ?   (floats only) ?                     ?
?  ???????????????????                ???????????????????                     ?
?           ?                                  ?                              ?
?           ?                                  ?                              ?
?  ???????????????????                ???????????????????                     ?
?  ?   Texture2D     ?                ?  SDF Shader     ?                     ?
?  ?   (memory)      ?                ?  (GPU math)     ?                     ?
?  ???????????????????                ???????????????????                     ?
?           ?                                  ?                              ?
?           ?                                  ?                              ?
?  ???????????????????                ???????????????????                     ?
?  ?  Sprite Render  ?                ?  Procedural     ?                     ?
?  ?  (fixed look)   ?                ?  (infinite var) ?                     ?
?  ???????????????????                ???????????????????                     ?
?                                                                             ?
?  BENEFITS OF PROCEDURAL:                                                    ?
?  ?? Zero texture memory                                                     ?
?  ?? Infinite visual variety                                                 ?
?  ?? Perfect resolution at any scale                                         ?
?  ?? Real-time animation via shader params                                   ?
?  ?? Deterministic (same params = same visual)                               ?
?                                                                             ?
???????????????????????????????????????????????????????????????????????????????
```

---

## ?? SDF (Signed Distance Field) Rendering

```
???????????????????????????????????????????????????????????????????????????????
?                      SIGNED DISTANCE FIELD CONCEPT                          ?
???????????????????????????????????????????????????????????????????????????????
?                                                                             ?
?  For each pixel, calculate DISTANCE to nearest edge of shape               ?
?                                                                             ?
?  INSIDE shape:  distance < 0  (negative)                                    ?
?  ON edge:       distance = 0  (zero)                                        ?
?  OUTSIDE shape: distance > 0  (positive)                                    ?
?                                                                             ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                                                                 ?        ?
?  ?        -0.3  -0.2  -0.1   0   +0.1  +0.2  +0.3                  ?        ?
?  ?          ?     ?     ?    ?     ?     ?     ?                   ?        ?
?  ?          ?     ?     ?    ?     ?     ?     ?                   ?        ?
?  ?        ???????????????????????????????????????                  ?        ?
?  ?        ???????????????????                   ?                  ?        ?
?  ?        ???????????????????                   ?                  ?        ?
?  ?        ???? INSIDE ??????? ? edge (d=0)      ?  OUTSIDE         ?        ?
?  ?        ???? (d < 0) ??????                   ?  (d > 0)         ?        ?
?  ?        ???????????????????                   ?                  ?        ?
?  ?        ???????????????????                   ?                  ?        ?
?  ?        ???????????????????????????????????????                  ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
?  RENDERING:                                                                 ?
?  ?? d < 0:        Fill with color (inside)                                  ?
?  ?? d ? 0:        Anti-aliased edge                                         ?
?  ?? 0 < d < glow: Glow falloff                                              ?
?  ?? d > glow:     Transparent                                               ?
?                                                                             ?
???????????????????????????????????????????????????????????????????????????????
```

---

## ?? SDF Shape Primitives

```
???????????????????????????????????????????????????????????????????????????????
?                        SDF SHAPE LIBRARY                                    ?
???????????????????????????????????????????????????????????????????????????????
?                                                                             ?
?  CIRCLE                    BOX                      ROUNDED BOX             ?
?  ????????                  ???                      ???????????             ?
?                                                                             ?
?       ????????                 ????????????             ??????????          ?
?     ??????????????           ??????????????           ????????????          ?
?    ????????????????          ??????????????          ??????????????         ?
?   ??????????????????         ??????????????          ??????????????         ?
?   ??????????????????         ??????????????          ??????????????         ?
?   ??????????????????         ??????????????          ??????????????         ?
?    ????????????????          ??????????????           ????????????          ?
?     ??????????????           ??????????????            ??????????           ?
?       ????????                 ????????????                                 ?
?                                                                             ?
?  d = length(p) - r         d = max(abs(p)-b)       d = box - radius         ?
?                                                                             ?
?  TRIANGLE                  POLYGON (N-sided)       STAR                     ?
?  ????????                  ?????????????????       ????                     ?
?                                                                             ?
?         ??                       ????                    ??                 ?
?        ????                    ????????                ??????               ?
?       ??????                  ??????????             ????????????           ?
?      ????????                ????????????           ??????????????          ?
?     ??????????               ????????????            ??????????             ?
?    ????????????               ??????????            ????????????            ?
?   ??????????????               ????????            ??????????????           ?
?  ????????????????                ????                ??????????             ?
?                                                          ??                 ?
?                                                                             ?
?  Uses half-plane          Radial symmetry +         Inner/outer radius      ?
?  intersection             angle calculation         with points             ?
?                                                                             ?
???????????????????????????????????????????????????????????????????????????????
```

---

## ?? SDF Operations (Boolean Combinations)

```
???????????????????????????????????????????????????????????????????????????????
?                     SDF BOOLEAN OPERATIONS                                  ?
???????????????????????????????????????????????????????????????????????????????
?                                                                             ?
?  UNION (OR)                INTERSECTION (AND)      SUBTRACTION              ?
?  ??????????                ???????????????????     ???????????              ?
?                                                                             ?
?    ????????                     ????                 ????????               ?
?  ??????????????               ????????             ????????????             ?
? ????????????????             ??????????           ??????    ????            ?
? ??????????????????           ??????????           ????        ??            ?
?  ????????????????             ????????            ????        ??            ?
?    ??????????????               ????              ??????    ????            ?
?      ??????????                                    ????????????             ?
?        ????????                                      ????????               ?
?                                                                             ?
?  min(d1, d2)               max(d1, d2)            max(d1, -d2)              ?
?                                                                             ?
?  SMOOTH UNION              SMOOTH SUBTRACTION     ROUNDING                  ?
?  ????????????              ???????????????????    ????????                  ?
?                                                                             ?
?    ????????                   ????????             ????????????             ?
?  ????????????????           ??????????????       ??????????????????         ?
? ??????????????????         ??????????????????   ????????????????????        ?
? ????????????????????       ???????????????????? ??????????????????????      ?
?  ??????????????????         ??????????????????   ????????????????????       ?
?    ????????????????           ????????????????     ????????????????         ?
?      ??????????????             ??????????           ????????????           ?
?        ????????????               ????????             ????????             ?
?                                                                             ?
?  Smooth blend with k       Smooth carve            d - radius               ?
?                                                                             ?
???????????????????????????????????????????????????????????????????????????????
```

---

## ?? Enemy Sprite Generation

```
???????????????????????????????????????????????????????????????????????????????
?                    ENEMY SPRITE CONSTRUCTION                                ?
???????????????????????????????????????????????????????????????????????????????
?                                                                             ?
?  ENEMY TYPE: SHOOTER                                                        ?
?  ???????????????????                                                        ?
?                                                                             ?
?  STEP 1: Base Shape (Rounded Box)                                           ?
?  ??????????????????????????????????????????????????????????????????         ?
?  ?                                                                ?         ?
?  ?                      ????????????                              ?         ?
?  ?                    ??????????????????                          ?         ?
?  ?                    ??????????????????                          ?         ?
?  ?                    ??????????????????                          ?         ?
?  ?                      ????????????                              ?         ?
?  ?                                                                ?         ?
?  ?  SDF: sdRoundBox(p, vec2(0.4, 0.3), 0.1)                       ?         ?
?  ??????????????????????????????????????????????????????????????????         ?
?                                                                             ?
?  STEP 2: Add Wings (Union with triangles)                                   ?
?  ??????????????????????????????????????????????????????????????????         ?
?  ?                                                                ?         ?
?  ?                      ????????????                              ?         ?
?  ?          ????      ??????????????????      ????                ?         ?
?  ?        ????????    ??????????????????    ????????              ?         ?
?  ?          ????      ??????????????????      ????                ?         ?
?  ?                      ????????????                              ?         ?
?  ?                                                                ?         ?
?  ?  SDF: min(body, min(leftWing, rightWing))                      ?         ?
?  ??????????????????????????????????????????????????????????????????         ?
?                                                                             ?
?  STEP 3: Add Details (Subtract cockpit, add engines)                        ?
?  ??????????????????????????????????????????????????????????????????         ?
?  ?                                                                ?         ?
?  ?                      ????????????                              ?         ?
?  ?          ????      ????????????????????    ????                ?         ?
?  ?        ????????    ????    ??    ????????????????              ?         ?
?  ?          ????      ????????????????????    ????                ?         ?
?  ?                    ??????????????????                          ?         ?
?  ?                    ????  ????  ????   ? engines                ?         ?
?  ?                                                                ?         ?
?  ?  Final = body + wings - cockpit + engines                      ?         ?
?  ??????????????????????????????????????????????????????????????????         ?
?                                                                             ?
?  STEP 4: Apply Theme Colors + Glow                                          ?
?  ??????????????????????????????????????????????????????????????????         ?
?  ?                                                                ?         ?
?  ?  if (d < 0)          ? Fill with PRIMARY color                 ?         ?
?  ?  if (d < 0 && engine) ? Fill with ACCENT color                 ?         ?
?  ?  if (d ? 0)          ? SECONDARY color edge                    ?         ?
?  ?  if (0 < d < glow)   ? Glow falloff (ACCENT color)             ?         ?
?  ?                                                                ?         ?
?  ??????????????????????????????????????????????????????????????????         ?
?                                                                             ?
???????????????????????????????????????????????????????????????????????????????
```

---

## ?? Boss Sprite Construction

```
???????????????????????????????????????????????????????????????????????????????
?                      BOSS MULTI-HITBOX VISUAL                               ?
???????????????????????????????????????????????????????????????????????????????
?                                                                             ?
?  BOSS STRUCTURE (8 hitbox zones, each with own SDF)                         ?
?                                                                             ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                                                                 ?        ?
?  ?                      ?????????????                              ?        ?
?  ?                      ?   HEAD    ? ? Hitbox 3                   ?        ?
?  ?                      ?  (glow)   ?   Revealed Phase 2+          ?        ?
?  ?                      ?????????????                              ?        ?
?  ?                            ?                                    ?        ?
?  ?    ???????????       ?????????????       ???????????            ?        ?
?  ?    ? LEFT    ?       ?   CORE    ?       ?  RIGHT  ?            ?        ?
?  ?    ?  ARM    ?????????  (main)   ?????????   ARM   ?            ?        ?
?  ?    ? [gun]   ?       ?           ?       ?  [gun]  ?            ?        ?
?  ?    ???????????       ?????????????       ???????????            ?        ?
?  ?    Hitbox 1                ?                Hitbox 2            ?        ?
?  ?                      ?????????????                              ?        ?
?  ?                      ? WEAKPOINT ? ? Hitbox 4                   ?        ?
?  ?                      ?  (2× dmg) ?   Revealed Phase 3+          ?        ?
?  ?                      ?????????????                              ?        ?
?  ?                                                                 ?        ?
?  ?                ?????????     ?????????                          ?        ?
?  ?                ?TURRET1?     ?TURRET2? ? Hitboxes 5,7           ?        ?
?  ?                ?????????     ?????????   Always active          ?        ?
?  ?                                                                 ?        ?
?  ?            ???????????????????????????????                      ?        ?
?  ?            ?         SHIELD              ? ? Hitbox 6           ?        ?
?  ?            ?     (blocks damage)         ?   Active Phase 1-2   ?        ?
?  ?            ???????????????????????????????                      ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
?  RENDERING ORDER:                                                           ?
?  ?? 1. Shield (if active) - translucent overlay                             ?
?  ?? 2. Core body - main SDF                                                 ?
?  ?? 3. Arms - separate SDF with animation offset                            ?
?  ?? 4. Head - emerges in Phase 2                                            ?
?  ?? 5. Weakpoint - pulses when exposed                                      ?
?  ?? 6. Turrets - rotating SDF                                               ?
?                                                                             ?
???????????????????????????????????????????????????????????????????????????????
```

---

## ?? Theme-Based Color Application

```
???????????????????????????????????????????????????????????????????????????????
?                    COLOR PALETTE APPLICATION                                ?
???????????????????????????????????????????????????????????????????????????????
?                                                                             ?
?  THEME COLORS (from ThemeGenerator)                                         ?
?  ??????????????????????????????????                                         ?
?                                                                             ?
?  ??????????? ??????????? ??????????? ??????????? ???????????                ?
?  ? PRIMARY ? ?SECONDARY? ? ACCENT  ? ? BG DARK ? ?BG LIGHT ?                ?
?  ? ????????? ? ????????? ? ????????? ? ????????? ? ?????????                ?
?  ? ????????? ? ????????? ? ????????? ? ????????? ? ?????????                ?
?  ??????????? ??????????? ??????????? ??????????? ???????????                ?
?    Enemy      Outlines    Glow/FX     Background   Stars                    ?
?    Bodies     Details     Bullets     Deep space   Highlights               ?
?                                                                             ?
?  APPLICATION MAP:                                                           ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                                                                 ?        ?
?  ?  ELEMENT              PRIMARY   SECONDARY   ACCENT   BG         ?        ?
?  ?  ?????????????????????????????????????????????????????????????  ?        ?
?  ?  Enemy Body           ????      ?           ?        ?          ?        ?
?  ?  Enemy Outline        ?         ????        ?        ?          ?        ?
?  ?  Enemy Glow           ?         ?           ????     ?          ?        ?
?  ?  Enemy Engines        ?         ?           ????     ?          ?        ?
?  ?                                                                 ?        ?
?  ?  Boss Core            ????      ????        ?        ?          ?        ?
?  ?  Boss Weakpoint       ?         ?           ????     ?          ?        ?
?  ?  Boss Shield          ?         ???? (50%)  ?        ?          ?        ?
?  ?                                                                 ?        ?
?  ?  Player Bullets       ?         ?           ????     ?          ?        ?
?  ?  Enemy Bullets        ????      ?           ?        ?          ?        ?
?  ?                                                                 ?        ?
?  ?  Background           ?         ?           ?        ????       ?        ?
?  ?  Stars                ?         ?           ?        ????       ?        ?
?  ?  Nebula               ???? (20%)?           ????(30%)?          ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
???????????????????????????????????????????????????????????????????????????????
```

---

## ?? Background Generation

```
???????????????????????????????????????????????????????????????????????????????
?                    PARALLAX BACKGROUND SYSTEM                               ?
???????????????????????????????????????????????????????????????????????????????
?                                                                             ?
?  LAYER STACK (back to front)                                                ?
?                                                                             ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                                                                 ?        ?
?  ?  LAYER 4: FOREGROUND (Speed: 1.0x)                              ?        ?
?  ?  ?????????????????????????????????                              ?        ?
?  ?  Asteroids, debris - SDF rendered                               ?        ?
?  ?                                                                 ?        ?
?  ?  ????????????????????????????????????????????????????????????   ?        ?
?  ?                                                                 ?        ?
?  ?  LAYER 3: MIDGROUND (Speed: 0.5x)                               ?        ?
?  ?  ????????????????????????????????                               ?        ?
?  ?  Distant asteroids, particles                                   ?        ?
?  ?                                                                 ?        ?
?  ?  ????????????????????????????????????????????????????????????   ?        ?
?  ?                                                                 ?        ?
?  ?  LAYER 2: STARS (Speed: 0.2x)                                   ?        ?
?  ?  ???????????????????????????                                    ?        ?
?  ?  Procedural star field (noise-based)                            ?        ?
?  ?                                                                 ?        ?
?  ?  ????????????????????????????????????????????????????????????   ?        ?
?  ?                                                                 ?        ?
?  ?  LAYER 1: NEBULA (Speed: 0.1x)                                  ?        ?
?  ?  ????????????????????????????                                   ?        ?
?  ?  Fractal noise clouds, theme-colored                            ?        ?
?  ?                                                                 ?        ?
?  ?  ????????????????????????????????????????????????????????????   ?        ?
?  ?                                                                 ?        ?
?  ?  LAYER 0: DEEP SPACE (Speed: 0.0x)                              ?        ?
?  ?  ?????????????????????????????????                              ?        ?
?  ?  Solid BG_DARK color                                            ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
?  SHADER IMPLEMENTATION:                                                     ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                                                                 ?        ?
?  ?  float4 Background(float2 uv, float time)                       ?        ?
?  ?  {                                                              ?        ?
?  ?      // Base color                                              ?        ?
?  ?      float4 col = _BGDark;                                      ?        ?
?  ?                                                                 ?        ?
?  ?      // Nebula (slowest parallax)                               ?        ?
?  ?      float2 nebulaUV = uv + _ScrollDir * time * 0.1;            ?        ?
?  ?      col = lerp(col, _Primary, fbm(nebulaUV) * 0.3);            ?        ?
?  ?                                                                 ?        ?
?  ?      // Stars                                                   ?        ?
?  ?      float2 starUV = uv + _ScrollDir * time * 0.2;              ?        ?
?  ?      col += Stars(starUV) * _BGLight;                           ?        ?
?  ?                                                                 ?        ?
?  ?      return col;                                                ?        ?
?  ?  }                                                              ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
???????????????????????????????????????????????????????????????????????????????
```

---

## ? VFX Graph Integration

```
???????????????????????????????????????????????????????????????????????????????
?                      VFX GRAPH PARTICLE SYSTEMS                             ?
???????????????????????????????????????????????????????????????????????????????
?                                                                             ?
?  ALL VFX USE THEME COLORS (passed as exposed properties)                    ?
?                                                                             ?
?  EXPLOSION VFX                                                              ?
?  ?????????????                                                              ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                                                                 ?        ?
?  ?  Frame 0        Frame 5        Frame 10       Frame 20          ?        ?
?  ?                                                                 ?        ?
?  ?     ??            ????           ????????         ????          ?        ?
?  ?    ????          ??????         ??????????       ??????         ?        ?
?  ?     ??            ????          ????????????       ????         ?        ?
?  ?                  ??????           ??????????       ??           ?        ?
?  ?                   ????             ????????                     ?        ?
?  ?                                                                 ?        ?
?  ?  ACCENT color    Expand          Peak             Fade          ?        ?
?  ?  (bright)        + sparks        + smoke          out           ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
?  BULLET TRAIL VFX                                                           ?
?  ????????????????                                                           ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                                                                 ?        ?
?  ?  ?????????????????????????  Bullet                              ?        ?
?  ?  ????????????????????????   Trail (fades with distance)         ?        ?
?  ?  ????????????????????????   Glow (ACCENT color)                 ?        ?
?  ?                                                                 ?        ?
?  ?  Trail length = bullet speed × 0.5                              ?        ?
?  ?  Glow intensity = 1.0 ? 0.0 over trail length                   ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
?  ENGINE TRAIL VFX                                                           ?
?  ????????????????                                                           ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                                                                 ?        ?
?  ?      ????????????                                               ?        ?
?  ?      ?? SHIP ????????????????????                               ?        ?
?  ?      ????????????  ??????????????  Engine particles             ?        ?
?  ?                    ACCENT glow                                  ?        ?
?  ?                                                                 ?        ?
?  ?  Particles spawn at engine position                             ?        ?
?  ?  Velocity = -ship.velocity × 0.8                                ?        ?
?  ?  Color = ACCENT ? transparent                                   ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
?  HIT SPARK VFX                                                              ?
?  ?????????????                                                              ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                                                                 ?        ?
?  ?           ?  ?  ?                                               ?        ?
?  ?            ? ? ?                                                ?        ?
?  ?         ???????????  Impact point                               ?        ?
?  ?            ? ? ?                                                ?        ?
?  ?           ?  ?  ?    Radial sparks (8-16 particles)             ?        ?
?  ?                                                                 ?        ?
?  ?  Color: SECONDARY ? ACCENT                                      ?        ?
?  ?  Lifetime: 0.1s                                                 ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
???????????????????????????????????????????????????????????????????????????????
```

---

## ?? Damage and State Feedback

```
???????????????????????????????????????????????????????????????????????????????
?                    VISUAL STATE FEEDBACK                                    ?
???????????????????????????????????????????????????????????????????????????????
?                                                                             ?
?  HIT FLASH (damage taken)                                                   ?
?  ????????????????????????                                                   ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                                                                 ?        ?
?  ?  Frame 0 (hit)      Frame 1          Frame 2          Frame 3   ?        ?
?  ?                                                                 ?        ?
?  ?  ????????????       ????????????     ????????????     ????????  ?        ?
?  ?  ????????????       ????????????     ????????????     ????????  ?        ?
?  ?  ????????????       ????????????     ????????????     ????????  ?        ?
?  ?                                                                 ?        ?
?  ?  WHITE (100%)       WHITE (66%)      WHITE (33%)      NORMAL    ?        ?
?  ?                                                                 ?        ?
?  ?  Shader: lerp(baseColor, white, flashIntensity)                 ?        ?
?  ?  flashIntensity decays: 1.0 ? 0.0 over 3 frames                 ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
?  LOW HEALTH WARNING                                                         ?
?  ??????????????????                                                         ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                                                                 ?        ?
?  ?  HP > 50%:   Normal rendering                                   ?        ?
?  ?                                                                 ?        ?
?  ?  HP 25-50%:  Occasional spark particles                         ?        ?
?  ?              ????????????                                       ?        ?
?  ?              ????????????  ? ?  ? small sparks                  ?        ?
?  ?              ????????????                                       ?        ?
?  ?                                                                 ?        ?
?  ?  HP < 25%:   Smoke trail + red tint pulse                       ?        ?
?  ?              ???????????? ????                                  ?        ?
?  ?              ???????????? ??????  ? smoke particles             ?        ?
?  ?              ???????????? ????                                  ?        ?
?  ?              Pulsing red overlay (sin(time * 5))                ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
?  BOSS PHASE TRANSITION                                                      ?
?  ?????????????????????                                                      ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                                                                 ?        ?
?  ?  1. Screen flash (white overlay, 0.2s)                          ?        ?
?  ?  2. Boss invulnerable (shield shimmer effect)                   ?        ?
?  ?  3. Parts animate to new positions                              ?        ?
?  ?  4. New hitboxes reveal with glow pulse                         ?        ?
?  ?  5. Screen returns to normal                                    ?        ?
?  ?                                                                 ?        ?
?  ?  Duration: 2 seconds total                                      ?        ?
?  ?  Player: Cannot damage boss during transition                   ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
???????????????????????????????????????????????????????????????????????????????
```

---

## ?? Shader Parameter Pipeline

```
???????????????????????????????????????????????????????????????????????????????
?                    SHADER PARAMETER FLOW                                    ?
???????????????????????????????????????????????????????????????????????????????
?                                                                             ?
?  ???????????????????                                                        ?
?  ? ThemeGenerator  ?                                                        ?
?  ? (Job + Burst)   ?                                                        ?
?  ???????????????????                                                        ?
?           ? NativeArray<float> colors                                       ?
?           ?                                                                 ?
?  ???????????????????                                                        ?
?  ? GenerationCache ?                                                        ?
?  ? (managed copy)  ?                                                        ?
?  ???????????????????                                                        ?
?           ? ThemeData struct                                                ?
?           ?                                                                 ?
?  ???????????????????                                                        ?
?  ? MaterialManager ?  ? Sets global shader properties                       ?
?  ???????????????????                                                        ?
?           ?                                                                 ?
?           ?????????????????????????????????????????????????????????         ?
?           ?                                                       ?         ?
?           ?                                                       ?         ?
?  ???????????????????????????????????    ??????????????????????????????????? ?
?  ?  GLOBAL SHADER PROPERTIES       ?    ?  MATERIAL PROPERTY BLOCKS       ? ?
?  ?  (Shader.SetGlobalColor)        ?    ?  (per-instance overrides)       ? ?
?  ???????????????????????????????????    ??????????????????????????????????? ?
?  ?  _PrimaryColor                  ?    ?  _FlashIntensity               ? ?
?  ?  _SecondaryColor                ?    ?  _DamageAmount                 ? ?
?  ?  _AccentColor                   ?    ?  _PhaseProgress                ? ?
?  ?  _BGDarkColor                   ?    ?  _HitboxActive                 ? ?
?  ?  _BGLightColor                  ?    ?  _AnimationOffset              ? ?
?  ???????????????????????????????????    ??????????????????????????????????? ?
?           ?                                       ?                         ?
?           ?????????????????????????????????????????                         ?
?                               ?                                             ?
?                               ?                                             ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                      GPU RENDERING                              ?        ?
?  ?                                                                 ?        ?
?  ?  SDF Shader evaluates:                                          ?        ?
?  ?  ?? Shape from SDF parameters                                   ?        ?
?  ?  ?? Color from global + per-instance properties                 ?        ?
?  ?  ?? Effects (glow, flash, damage)                               ?        ?
?  ?  ?? Final pixel output                                          ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
???????????????????????????????????????????????????????????????????????????????
```

---

## ?? Performance Considerations

```
???????????????????????????????????????????????????????????????????????????????
?                    VISUAL SYSTEM PERFORMANCE                                ?
???????????????????????????????????????????????????????????????????????????????
?                                                                             ?
?  SDF COMPLEXITY BUDGET                                                      ?
?  ?????????????????????                                                      ?
?                                                                             ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?  Entity Type       Max SDF Ops    Target Overdraw    Batch Size ?        ?
?  ?  ??????????????????????????????????????????????????????????????  ?        ?
?  ?  Enemy (simple)    8 ops          1.5x               64         ?        ?
?  ?  Enemy (complex)   16 ops         2.0x               32         ?        ?
?  ?  Boss hitbox       24 ops         2.5x               8          ?        ?
?  ?  Bullet            4 ops          1.2x               256        ?        ?
?  ?  Background        32 ops         1.0x               1          ?        ?
?  ?                                                                 ?        ?
?  ?  Total on screen:                                               ?        ?
?  ?  ?? 50 enemies × 8 ops = 400 ops                                ?        ?
?  ?  ?? 8 boss hitboxes × 24 ops = 192 ops                          ?        ?
?  ?  ?? 200 bullets × 4 ops = 800 ops                               ?        ?
?  ?  ?? Background = 32 ops                                         ?        ?
?  ?  ?????????????????????????????                                  ?        ?
?  ?  TOTAL: ~1,424 SDF ops per frame (GPU handles easily)           ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
?  BATCHING STRATEGY                                                          ?
?  ?????????????????                                                          ?
?                                                                             ?
?  ???????????????????????????????????????????????????????????????????        ?
?  ?                                                                 ?        ?
?  ?  All enemies of same type ? Single draw call (GPU instancing)   ?        ?
?  ?  All bullets             ? Single draw call (GPU instancing)    ?        ?
?  ?  Background              ? Single full-screen quad              ?        ?
?  ?  VFX                     ? GPU particles (VFX Graph)            ?        ?
?  ?                                                                 ?        ?
?  ?  Target: < 50 draw calls total                                  ?        ?
?  ?                                                                 ?        ?
?  ???????????????????????????????????????????????????????????????????        ?
?                                                                             ?
???????????????????????????????????????????????????????????????????????????????
```

---

*Previous: [01-AsyncGenerationPipeline.md](01-AsyncGenerationPipeline.md)*
*Next: [03-ProceduralAudio.md](03-ProceduralAudio.md) - Real-time audio synthesis*
